<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://img.icons8.com/color/48/pokeball-2.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="calculadora.css">
    <title>Calculadora</title>
</head>

<body>

    <div class="navbar">
        <h1 class="titulo">
            <img class="pokeIcon" src="imagens/pokeball-icon.png" type="image/png">
            Calculadora Pokémon - Derivadas e Integrais
            <img class="pokeIcon" src="imagens/pokeball-icon.png" type="image/png">
        </h1>
    </div>

    <div class="alternarModo">
        <button class="toggle-dark" onclick="alternarModo()">
            <img id="icone-tema" src="https://img.icons8.com/emoji/48/sun-emoji.png" alt="tema">
        </button>
    </div>



    <div class="calculadora" role="toolbar" aria-label="calculadora">
        <input type="text" id="funcao" placeholder="Digite a função (ex: x^2 + 3*x)">

        <div class="botoes btn-group me-2" role="group" aria-label="Numerais">

            <button type="button" class="btn " onclick="inserirInput(this)">9</button>
            <button type="button" class="btn " onclick="inserirInput(this)">8</button>
            <button type="button" class="btn " onclick="inserirInput(this)">7</button>

            <button type="button" class="btn " onclick="inserirInput(this)">+</button>
            <button type="button" class="btn " onclick="inserirInput(this)">-</button>
            <button type="button" class="limpar " onclick="apagar()">⌫</button>

            <button type="button" class="btn " onclick="inserirInput(this)">4</button>
            <button type="button" class="btn " onclick="inserirInput(this)">5</button>
            <button type="button" class="btn " onclick="inserirInput(this)">6</button>

            <button type="button" class="btn " onclick="inserirInput(this)">*</button>
            <button type="button" class="btn " onclick="inserirInput(this)">÷</button>
            <button type="button" class="limpar " onclick="limpartexto()">C</button>

            <button type="button" class="btn " onclick="inserirInput(this)">3</button>
            <button type="button" class="btn " onclick="inserirInput(this)">2</button>
            <button type="button" class="btn " onclick="inserirInput(this)">1</button>

            <button type="button" class="btn " onclick="inserirInput(this)">x</button>
            <button type="button" class="btn " onclick="inserirInput(this)">e</button>
            <button type="button" class="igual" onclick="executarCalculo()">Calcular</button>
            <button type="button" class="btn " onclick="inserirInput(this)">(</button>

            <button type="button" class="btn " onclick="inserirInput(this)">0</button>
            <button type="button" class="btn " onclick="inserirInput(this)">)</button>
            <button type="button" class="btn " onclick="inserirInput(this)">^</button>
            <button type="button" class="btn " onclick="inserirInput(this)">=</button>

        </div>

        <div class="resultados">
            <p id="resultado"></p>
        </div>
    </div>



    <script src="derivadaFuncional.js"></script>
    <script src="calculadora.js"></script>
    <script>
        function inserirInput(botao) {
            const visor = document.getElementById('funcao');
            visor.value += botao.innerText;
        }

        function limpartexto() {
            document.getElementById('funcao').value = '';
        }

        function apagar() {
            const visor = document.getElementById('funcao');
            visor.value = visor.value.slice(0, -1);
        }

        function alternarModo() {
            document.body.classList.toggle('dark-mode');
            const icone = document.getElementById('icone-tema');

            icone.classList.add('rotate');
            setTimeout(() => icone.classList.remove('rotate'), 300);

            icone.src = document.body.classList.contains('dark-mode') ?
                'https://img.icons8.com/emoji/48/new-moon-emoji.png' :
                'https://img.icons8.com/emoji/48/sun-emoji.png';
        }

        function executarCalculo() {
            const entrada = document.getElementById('funcao').value;
            const resultadoElemento = document.getElementById('resultado');

            try {
                const resultado = calcularDerivada(entrada);
                console.log("Resultado da derivada:", resultado);
                resultadoElemento.innerText = resultado;
            } catch (erro) {
                console.error("Erro durante o cálculo:", erro);
                resultadoElemento.innerText = "Erro ao calcular";
            }
        }


    </script>

</body>

</html>